const  innerCons = 
`
<div class="con-inner">
<audio src="./images/music.mp3"  id="audio1"  loop="loop"></audio>
<div class="music active" id='music'><img src="./images/music.png"></div>
<div class="wedding-inner">
<div class="top">
   <div class="big-pic">
        <img class='pic' src="./images/top_pic.jpg" alt="">
        <img class="memo" src="./images/log.png" alt="">
   </div>
</div>
<img src="./images/top1.png" alt="">
<p>
  <img src="./images/carbon.png" alt="">
</p>
<!--è‡ªæˆ‘ä»‹ç» -->
<div class="groom-bride">
    <div class="person bride">
      <div class="pics">
        <img src="./images/us/bride.jpg" />
        <p>æˆ‘æ˜¯æ–°å¨˜</p>
      </div>
      <div class="desc ml10">
          æˆ‘å¯¹è±¡æ˜¯ä¸€ä¸ªè¿åŠ¨ç»†èƒå‘è¾¾å¤´è„‘æ›´å‘è¾¾ï¼ˆmaybe å¯èƒ½ ä¹Ÿè®¸ éå¸¸ï¼‰ä¸æµªæ¼«çš„ç›´ç”·ï¼›ä»–å–„è‰¯åˆçœŸè¯šï¼Œæ˜¯ä¸€ä¸ªæ•¢å†¬å¤©ç›´é¢å†·æ°´æ´—è½¦çš„ç”·äººï½ï½ ï¼›ä»–è¯´ä»¥åä¼šå½“æˆ‘çš„å¥½é˜Ÿå‹ï¼Œè¿™è®©æˆ‘å¾ˆå®‰å¿ƒã€‚ã€‚ã€‚
      </div>
      
    </div>
    <div class="person groom">    
        <div class="desc mr10">
          æˆ‘åª³å¦‡æ˜¯ä¸€ä¸ªå¯çˆ±ã€ç§¯æå‘ä¸Šçš„å°ä»™å¥³ï¼Œæˆ‘ä»¬æœ‰ç€ä¸å°‘å…±åŒç‚¹ï¼Œæ¯”å¦‚éƒ½å–œæ¬¢å°å­©å­ï¼Œå¯¹äººå‹å–„ï¼Œå‹¤ä¿­èŠ‚çº¦ï¼Œæœ€ä½©æœå¥¹çš„ä¸€ç‚¹æ˜¯çƒ§çš„èœåˆé¦™åˆå¥½åƒ(^ï½^)ï¼Œä»¥åä¸ä¼šå˜æˆå¤§èƒ–å­å§ã€‚ã€‚ã€‚
        </div>
        <div class="pics">
            <img src="./images/us/groome.jpg" />
            <p>æˆ‘æ˜¯æ–°éƒ</p>
        </div>
      </div>
</div>
<p class="sub-title">
    <img src="./images/flower/1.png" alt="">
</p>
<!-- ç”Ÿæ´»ç…§ç‰‡ -->
<div class="life-photos" id="lifePhotos">
  <div class="item">
    <div class="col">
        <img src="./images/life/IMG_0112.jpg" alt="">
        <p class="msg">å˜»å˜»ï½</p>
      </div>
     
      <div class="col">
        <img src="./images/life/IMG_0586.jpg" alt="">
        <p class="msg">å¤§ğŸŠå¤§åˆ©</p>
      </div>
  </div>
  <div class="item">
    <div class="col">
      <img src="./images/life/IMG_0585.jpg" alt="">
      <p class="msg">ç¿»æ»šå§</p>
    </div>
    <div class="col">
      <img src="./images/life/IMG_9582.jpg" alt="">
      <p class="msg">æ¥çƒå§</p>
    </div>
</div>
<div class="item">
    <div class="col">
      <img src="./images/life/IMG_0590.jpg" alt="">
      <p class="msg">äºŒäººÂ·é£Ÿ</p>
    </div>
    <div class="col">
      <img src="./images/life/IMG_8631.jpg" alt="">
      <p class="msg">æœ‰ç‚¹ç”œ</p>
    </div>
</div>
<div class="item">
    <div class="col">
        <img src="./images/life/IMG_1894.jpg" alt="">
        <p class="msg">å“¼å“¼ï½</p>
      </div>
    <div class="col">
        <img src="./images/life/IMG_0588.jpg" alt="">
        <p class="msg">åˆæ³•ï½</p>
      </div>
</div>
<div class="item">
    <div class="col">
      <img src="./images/life/IMG_0584.jpg" alt="">
      <p class="msg">æ‘å“¥</p>
    </div>
    <div class="col">
      <img src="./images/life/IMG_0583.jpg" alt="">
      <p class="msg">æ‘å¦¹</p>
    </div>
</div>
</div>
 <!-- ç»“å©šç…§ç‰‡ è½®æ’­  -->
 <div class="swiper-container" id="weddingSwiper">
    <div class="swiper-wrapper">
      <div class="swiper-slide">
        <img src="./images/wedding/w1.jpg" alt="">
      </div>
      <div class="swiper-slide">
        <img src="./images/wedding/w2.jpg" alt="">
      </div>
      <div class="swiper-slide">
        <img src="./images/wedding/w3.jpg" alt="">
      </div>
      <div class="swiper-slide">
        <img src="./images/wedding/w03.jpg" alt="">
      </div>
      <div class="swiper-slide">
        <img src="./images/wedding/w4.jpg" alt="">
      </div>
      <div class="swiper-slide">
        <img src="./images/wedding/w5.jpg" alt="">
      </div>
      <div class="swiper-slide">
        <img src="./images/wedding/w6.jpg" alt="">
      </div>
      <div class="swiper-slide">
        <img src="./images/wedding/w9.jpg" alt="">
      </div>
      <div class="swiper-slide">
        <img src="./images/wedding/w10.jpg" alt="">
      </div>
    </div>
 </div>

  <!-- æ—¶é—´åœ°ç‚¹ -->
  <p class="sub-title">
    <img src="./images/flower/3.png" alt="">
 </p>
  <!-- å©šç¤¼å€’è®¡æ—¶ -->
  <div class="wedding-time">
    <ul class="ul" id='weddingTime'>
    </ul>
   </div>
 <div class="time-address">
   <p class="item">  <span class="icon"><img class="time" src="./images/time.png" alt=""></span>ï¼š2021å¹´10æœˆ02æ—¥ 18:00</p>
   <p class="item">  <span class="icon"><img src="./images/address.png" alt=""></span>ï¼šæ± å·å¸‚è´µæ± åŒºè§‚æ¸¯èŠ±å›­é¾™éƒ½å¤§é…’åº— </p>
 </div>
 
 <p class="sub-title">
    <img src="./images/flower/4.png" alt="">
</p>
  <!-- æ„Ÿè°¢ -->
</div>
</div>
`
window.onload = function(){
    let timer = null 
    const weddingCons = document.getElementById("weddingCons")
    const  envelope = document.getElementById("envelope")
    const audioObj = document.getElementById("audio")
    const joinBtn = document.getElementById("join")
    let audioObj1  
    let musicBtn 
    const coverObj = document.getElementById("cover")
    const dom  = document.getElementById("coverInner")
    const myText =`äº² çˆ± çš„ å®¶ äºº , æœ‹ å‹ ä½  ä»¬ å¥½ : <br/> æˆ‘ ä»¬ å³ å°† åœ¨ 2 0 2 1 å¹´ 1 0 æœˆ 0 2 å· ä¸¾ åŠ å©š ç¤¼ <br/>
    ç° ç‰¹ é‚€ æ‚¨ å‚ åŠ  æˆ‘ ä»¬ çš„ å©š ç¤¼ `
    const data = myText.split(' ')
    let index = 0
    function writing(index) {
        if (index < data.length) {
            dom.innerHTML += data[index]
            setTimeout(writing.bind(this), 200, ++index)
            
        }else{
            audioObj.pause()
            audioObj.style.display = 'none'
           setTimeout(() => {
            joinBtn.className = 'active'
            
           }, 500);  
        }  
    }
    // å¼€å°é¢
    envelope.onclick = function(){
        this.classList.add("shade-out")
        coverObj.classList.add("shade-in")
        writing(index)
        audioObj.play()
    }
     // å»å‚åŠ 
     joinBtn.onclick =  function(){
        coverObj.classList.add("shade-out")
        coverObj.classList.remove("shade-in")
        /**************å±•ç¤ºç¬¬ä¸‰é¡µ********************/
        // wedding contents
        weddingCons.classList.add("shade-in")
        weddingCons.innerHTML  = innerCons
        setTimeout(() => {
            audioObj1.play()
        }, 800);
        audioObj1 = document.getElementById("audio1")
        musicBtn = document.getElementById("music")
        new Swiper('.swiper-container',{
            loop:true,
            autoplay:true
        });
        musicBtn.addEventListener("click",()=>{
            if(musicBtn.classList.contains("active")){
                audioObj1.pause()
                musicBtn.classList.remove("active")
            }else{
                musicBtn.classList.add("active")
                audioObj1.play()
            }
        })
        getTime()
    }
    // musicBtn.onclick = function(){
    //     if(this.classList.contains("active")){
    //         audioObj1.pause()
    //         this.classList.remove("active")
    //     }else{
    //         this.classList.add("active")
    //         audioObj1.play()
    //     }
    // }


    // å€’è®¡æ—¶

   function  getDate(time,dom){
    const _time = new Date().getTime()
    const leftTime =  time - _time
    let innerSrc 
    if (leftTime>=0) {
       d = '0'+Math.floor(leftTime/1000/60/60/24);
       h = '0'+Math.floor(leftTime/1000/60/60%24);
       m = '0'+Math.floor(leftTime/1000/60%60);
       s = '0'+Math.floor(leftTime/1000%60);  
       innerSrc  = `
       <li class="item">
            <span class="num">${d.slice(-2)}</span>
            <p class="unit">
                å¤©
            </p>
        </li>
        <li class="item">
            <span class="num">${h.slice(-2)}</span>
            <p class="unit">
                å°æ—¶
            </p>
        </li>
        <li class="item">
          <span class="num">${m.slice(-2)}</span>
          <p class="unit">
              åˆ†é’Ÿ
          </p>
      </li>
      <li class="item">
          <span class="num">${s.slice(-2)}</span>
          <p class="unit">
              ç§’
          </p>
      </li>
`                 
   }else{
    if(timer){
        clearInterval(timer)
    }
    innerSrc   =  `
    <li class="item big-item"> 
        <p class="unit">
            we are family now 
        </p>
    </li>
`
   }
   
   dom.innerHTML = innerSrc
   }
   function getTime(){
       const timeCon  = document.getElementById("weddingTime")
       const time = new Date('2021/10/02 18:00').getTime()
       getDate(time,timeCon)
       timer = setInterval(() => {
           getDate(time,timeCon)
       }, 1000);
   }
    
}       